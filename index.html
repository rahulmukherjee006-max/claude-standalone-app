<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Money Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header-card {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            border-radius: 24px;
            padding: 30px;
            color: white;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .header-icon {
            background: rgba(255, 255, 255, 0.2);
            padding: 12px;
            border-radius: 16px;
            backdrop-filter: blur(10px);
        }

        .header-title h1 {
            font-size: 2.5em;
            font-weight: bold;
        }

        .header-title p {
            color: rgba(255, 255, 255, 0.8);
            margin-top: 5px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .summary-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .summary-card h3 {
            font-size: 0.9em;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .summary-card p {
            font-size: 2em;
            font-weight: bold;
        }

        .card {
            background: white;
            border-radius: 24px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .tab-btn {
            flex: 1;
            padding: 15px 25px;
            border: none;
            border-radius: 16px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .tab-btn.inactive {
            background: #f3f4f6;
            color: #6b7280;
        }

        .tab-btn.expense {
            background: linear-gradient(135deg, #ef4444 0%, #ec4899 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }

        .tab-btn.income {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        input, select, button {
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1em;
            outline: none;
            transition: all 0.3s;
        }

        input:focus, select:focus {
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .add-btn {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(79, 70, 229, 0.3);
        }

        .month-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding-left: 45px;
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
        }

        .transaction-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .transaction-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
            border-radius: 16px;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .transaction-item:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: #e0e7ff;
        }

        .transaction-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
        }

        .transaction-details {
            flex: 1;
            margin-left: 15px;
        }

        .transaction-amount {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .transaction-category {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 10px;
        }

        .transaction-meta {
            font-size: 0.9em;
            color: #6b7280;
            margin-top: 5px;
        }

        .delete-btn {
            background: #fee2e2;
            color: #ef4444;
            border: none;
            padding: 10px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .delete-btn:hover {
            background: #fecaca;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6b7280;
        }

        .empty-icon {
            width: 80px;
            height: 80px;
            background: #f3f4f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2em;
        }

        .chart-container {
            background: white;
            border-radius: 24px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .chart-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .chart-icon {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            padding: 10px;
            border-radius: 12px;
            color: white;
        }

        .chart-header h2 {
            font-size: 1.5em;
            color: #1f2937;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        canvas {
            max-width: 100%;
            height: auto !important;
        }

        @media (max-width: 768px) {
            .header-title h1 {
                font-size: 1.8em;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .summary-grid {
                grid-template-columns: 1fr;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
        <script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#13ec5b",
                        "background-light": "#f6f8f6",
                        "background-dark": "#102216",
                        "surface-dark": "#1a2c22", // Slightly lighter than background-dark for cards
                    },
                    fontFamily: {
                        "display": ["Manrope", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "2xl": "1rem", "full": "9999px" },
                },
            },
        }
    </script>
        <style>
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
        
    </style>
</head>
<body>
    <main class="flex-1 overflow-y-auto pb-24 no-scrollbar relative">
<!-- Header -->
<div class="flex items-center p-4 pt-6 justify-between sticky top-0 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-md z-10">
<div class="flex items-center gap-3">
<div class="relative">
<div class="bg-center bg-no-repeat bg-cover rounded-full size-10 border-2 border-primary" data-alt="User profile picture of Alex" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDPouQp-UkzVU_JmVXwY3vAsLkSrGdZJvFF_PwvbtgjMrvon8_AU4v0eZZZ7ZL5il8nDOoTl3mucA7RXIr9d2xa1zpGHdkNE0zRbGn5Kn5pFc-121zrNAfBxhEmAIUuD38NgVhT6xJSGKBHpo2C-ByUDPyjcIftVtnuXqn-Cp9_qv6bGnNAk5IFQ-NKs_mQcQcYpcTNkT6Nnem5aRVWfei_DK4P9DZenzbelxboXTuQP784R2ejQLlPSp8sMifC5U42tY38UGCZhy2m");'></div>
<div class="absolute bottom-0 right-0 size-3 bg-primary rounded-full border-2 border-background-dark"></div>
</div>
<div class="flex flex-col">
<p class="text-xs font-medium text-gray-500 dark:text-gray-400 leading-none mb-1">Welcome back,</p>
<h2 class="text-gray-900 dark:text-white text-lg font-bold leading-none tracking-tight">Alex Morgan</h2>
</div>
</div>
<button class="flex items-center justify-center rounded-full size-10 bg-surface-dark/50 text-white hover:bg-surface-dark transition-colors relative">
<span class="material-symbols-outlined" style="font-size: 24px;">notifications</span>
<span class="absolute top-2 right-2 size-2 bg-red-500 rounded-full border border-surface-dark"></span>
</button>
</div>
<!-- Total Balance & Budget Card -->
<div class="px-4 mt-2">
<div class="flex flex-col gap-6 rounded-2xl p-6 bg-surface-dark border border-white/5 relative overflow-hidden group">
<!-- Abstract Decoration -->
<div class="absolute -right-10 -top-10 w-40 h-40 bg-primary/10 rounded-full blur-3xl group-hover:bg-primary/20 transition-all duration-500"></div>
<div class="relative z-10">
<p class="text-gray-400 text-sm font-medium leading-normal mb-1">Total Balance</p>
<div class="flex items-baseline gap-2">
<p class="text-white tracking-tight text-4xl font-bold leading-tight">$12,450.00</p>
<span class="text-primary bg-primary/10 px-2 py-0.5 rounded-full text-xs font-bold">+2.4%</span>
</div>
</div>
<!-- Budget Progress -->
<div class="flex flex-col gap-2 relative z-10">
<div class="flex justify-between items-end">
<p class="text-white text-sm font-medium leading-normal">Monthly Budget</p>
<p class="text-gray-400 text-xs font-normal leading-normal"><span class="text-white font-bold">$2,250</span> / $3,000</p>
</div>
<div class="h-3 rounded-full bg-black/40 overflow-hidden">
<div class="h-full rounded-full bg-primary" style="width: 75%;"></div>
</div>
<p class="text-gray-400 text-xs font-normal mt-1">75% of budget used</p>
</div>
</div>
</div>
<!-- Categories Carousel -->
<div class="mt-8">
<div class="flex justify-between items-center px-4 mb-4">
<h3 class="text-white tracking-tight text-lg font-bold leading-tight">Spending by Category</h3>
<button class="text-primary text-sm font-bold">See All</button>
</div>
<div class="flex overflow-x-auto no-scrollbar pb-2 px-4 gap-3 snap-x">
<!-- Category Item: Food -->
<div class="snap-start shrink-0 flex flex-col gap-3 rounded-2xl p-4 bg-surface-dark border border-white/5 min-w-[140px] hover:bg-white/5 transition-colors cursor-pointer">
<div class="size-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center">
<span class="material-symbols-outlined">restaurant</span>
</div>
<div>
<p class="text-white text-base font-bold leading-normal">Food</p>
<p class="text-gray-400 text-sm font-medium">$450.00</p>
</div>
<div class="h-1 w-full bg-white/10 rounded-full mt-1">
<div class="h-full bg-orange-400 rounded-full" style="width: 45%"></div>
</div>
</div>
<!-- Category Item: Transport -->
<div class="snap-start shrink-0 flex flex-col gap-3 rounded-2xl p-4 bg-surface-dark border border-white/5 min-w-[140px] hover:bg-white/5 transition-colors cursor-pointer">
<div class="size-10 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center">
<span class="material-symbols-outlined">directions_car</span>
</div>
<div>
<p class="text-white text-base font-bold leading-normal">Transport</p>
<p class="text-gray-400 text-sm font-medium">$120.00</p>
</div>
<div class="h-1 w-full bg-white/10 rounded-full mt-1">
<div class="h-full bg-blue-400 rounded-full" style="width: 30%"></div>
</div>
</div>
<!-- Category Item: Shopping -->
<div class="snap-start shrink-0 flex flex-col gap-3 rounded-2xl p-4 bg-surface-dark border border-white/5 min-w-[140px] hover:bg-white/5 transition-colors cursor-pointer">
<div class="size-10 rounded-full bg-purple-500/20 text-purple-400 flex items-center justify-center">
<span class="material-symbols-outlined">shopping_bag</span>
</div>
<div>
<p class="text-white text-base font-bold leading-normal">Shopping</p>
<p class="text-gray-400 text-sm font-medium">$300.00</p>
</div>
<div class="h-1 w-full bg-white/10 rounded-full mt-1">
<div class="h-full bg-purple-400 rounded-full" style="width: 60%"></div>
</div>
</div>
<!-- Category Item: Health -->
<div class="snap-start shrink-0 flex flex-col gap-3 rounded-2xl p-4 bg-surface-dark border border-white/5 min-w-[140px] hover:bg-white/5 transition-colors cursor-pointer">
<div class="size-10 rounded-full bg-red-500/20 text-red-400 flex items-center justify-center">
<span class="material-symbols-outlined">cardiology</span>
</div>
<div>
<p class="text-white text-base font-bold leading-normal">Health</p>
<p class="text-gray-400 text-sm font-medium">$85.00</p>
</div>
<div class="h-1 w-full bg-white/10 rounded-full mt-1">
<div class="h-full bg-red-400 rounded-full" style="width: 15%"></div>
</div>
</div>
</div>
</div>
<!-- Recent Transactions -->
<div class="mt-8 px-4">
<h3 class="text-white tracking-tight text-lg font-bold leading-tight mb-4">Recent Transactions</h3>
<div class="flex flex-col gap-3">
<!-- Transaction Item 1 -->
<div class="flex items-center justify-between p-4 rounded-xl bg-surface-dark/50 hover:bg-surface-dark transition-colors">
<div class="flex items-center gap-4">
<div class="size-12 rounded-full bg-[#111] border border-white/5 flex items-center justify-center shrink-0">
<span class="material-symbols-outlined text-red-400">movie</span>
</div>
<div>
<p class="text-white font-bold text-base">Netflix</p>
<p class="text-gray-500 text-xs font-medium mt-0.5">Subscription ‚Ä¢ Today</p>
</div>
</div>
<p class="text-white font-bold text-base">-$15.00</p>
</div>
<!-- Transaction Item 2 -->
<div class="flex items-center justify-between p-4 rounded-xl bg-surface-dark/50 hover:bg-surface-dark transition-colors">
<div class="flex items-center gap-4">
<div class="size-12 rounded-full bg-[#111] border border-white/5 flex items-center justify-center shrink-0">
<span class="material-symbols-outlined text-orange-400">coffee</span>
</div>
<div>
<p class="text-white font-bold text-base">Starbucks</p>
<p class="text-gray-500 text-xs font-medium mt-0.5">Food &amp; Drink ‚Ä¢ Yesterday</p>
</div>
</div>
<p class="text-white font-bold text-base">-$6.50</p>
</div>
<!-- Transaction Item 3 -->
<div class="flex items-center justify-between p-4 rounded-xl bg-surface-dark/50 hover:bg-surface-dark transition-colors">
<div class="flex items-center gap-4">
<div class="size-12 rounded-full bg-[#111] border border-white/5 flex items-center justify-center shrink-0">
<span class="material-symbols-outlined text-primary">attach_money</span>
</div>
<div>
<p class="text-white font-bold text-base">Salary</p>
<p class="text-gray-500 text-xs font-medium mt-0.5">Income ‚Ä¢ Aug 24</p>
</div>
</div>
<p class="text-primary font-bold text-base">+$3,200.00</p>
</div>
<!-- Transaction Item 4 -->
<div class="flex items-center justify-between p-4 rounded-xl bg-surface-dark/50 hover:bg-surface-dark transition-colors">
<div class="flex items-center gap-4">
<div class="size-12 rounded-full bg-[#111] border border-white/5 flex items-center justify-center shrink-0">
<span class="material-symbols-outlined text-blue-400">local_gas_station</span>
</div>
<div>
<p class="text-white font-bold text-base">Shell Station</p>
<p class="text-gray-500 text-xs font-medium mt-0.5">Transport ‚Ä¢ Aug 22</p>
</div>
</div>
<p class="text-white font-bold text-base">-$45.20</p>
</div>
</div>
</div>
<!-- Spacer for FAB/Nav -->
<div class="h-24"></div>
</main>
<!-- Floating Action Button -->
<div class="fixed bottom-24 right-5 z-20">
<button class="size-14 rounded-full bg-primary text-background-dark shadow-lg shadow-primary/40 flex items-center justify-center hover:scale-105 active:scale-95 transition-transform duration-200">
<span class="material-symbols-outlined" style="font-size: 32px; font-weight: 600;">add</span>
</button>
</div>
<!-- Bottom Navigation -->
<nav class="fixed bottom-0 w-full bg-surface-dark border-t border-white/5 pb-6 pt-3 px-6 z-30">
<ul class="flex justify-between items-center">
<li>
<button class="flex flex-col items-center gap-1 text-primary w-14">
<span class="material-symbols-outlined filled" style="font-variation-settings: 'FILL' 1;">home</span>
<span class="text-[10px] font-bold">Home</span>
</button>
</li>
<li>
<button class="flex flex-col items-center gap-1 text-gray-500 hover:text-white transition-colors w-14">
<span class="material-symbols-outlined">bar_chart</span>
<span class="text-[10px] font-medium">Stats</span>
</button>
</li>
<li class="w-10"></li> <!-- Spacer for FAB visual balance if needed, but FAB is floating right -->
<li>
<button class="flex flex-col items-center gap-1 text-gray-500 hover:text-white transition-colors w-14">
<span class="material-symbols-outlined">account_balance_wallet</span>
<span class="text-[10px] font-medium">Wallet</span>
</button>
</li>
<li>
<button class="flex flex-col items-center gap-1 text-gray-500 hover:text-white transition-colors w-14">
<span class="material-symbols-outlined">person</span>
<span class="text-[10px] font-medium">Profile</span>
</button>
</li>
</ul>
</nav>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        let expenses = [];
        let income = [];
        let activeTab = 'expense';
        let monthlyChart = null;
        let dailyChart = null;

        const expenseCategories = [
            { name: 'Food', icon: 'üçî', color: '#f97316' },
            { name: 'Transportation', icon: 'üöó', color: '#3b82f6' },
            { name: 'Internet', icon: 'üì∂', color: '#8b5cf6' },
            { name: 'Credit Card', icon: 'üí≥', color: '#ec4899' },
            { name: 'Shopping', icon: 'üõçÔ∏è', color: '#10b981' },
            { name: 'Bills', icon: 'üìÑ', color: '#ef4444' },
            { name: 'Entertainment', icon: 'üé¨', color: '#6366f1' },
            { name: 'Healthcare', icon: '‚ù§Ô∏è', color: '#f43f5e' },
            { name: 'Other', icon: 'üì¶', color: '#6b7280' }
        ];

        const incomeCategories = [
            { name: 'Salary', icon: 'üíº', color: '#10b981' },
            { name: 'Freelance', icon: 'üíª', color: '#06b6d4' },
            { name: 'Business', icon: 'üè¢', color: '#14b8a6' },
            { name: 'Investment', icon: 'üìä', color: '#22c55e' },
            { name: 'Gift', icon: 'üéÅ', color: '#ec4899' },
            { name: 'Other', icon: 'üëõ', color: '#6b7280' }
        ];

        function init() {
            loadData();
            const today = new Date();
            document.getElementById('date').value = today.toISOString().split('T')[0];
            document.getElementById('selectedMonth').value = today.toISOString().slice(0, 7);
            updateCategories();
            renderAll();
            
            document.getElementById('selectedMonth').addEventListener('change', renderAll);
        }

        function loadData() {
            const savedExpenses = localStorage.getItem('expenses');
            const savedIncome = localStorage.getItem('income');
            if (savedExpenses) expenses = JSON.parse(savedExpenses);
            if (savedIncome) income = JSON.parse(savedIncome);
        }

        function saveData() {
            localStorage.setItem('expenses', JSON.stringify(expenses));
            localStorage.setItem('income', JSON.stringify(income));
        }

        function switchTab(tab) {
            activeTab = tab;
            const expenseBtn = document.getElementById('expenseTab');
            const incomeBtn = document.getElementById('incomeTab');
            
            if (tab === 'expense') {
                expenseBtn.className = 'tab-btn expense';
                incomeBtn.className = 'tab-btn inactive';
                document.getElementById('transactionTitle').textContent = 'Recent Expenses';
            } else {
                incomeBtn.className = 'tab-btn income';
                expenseBtn.className = 'tab-btn inactive';
                document.getElementById('transactionTitle').textContent = 'Recent Income';
            }
            
            document.getElementById('category').value = '';
            updateCategories();
            renderTransactions();
        }

        function updateCategories() {
            const categories = activeTab === 'expense' ? expenseCategories : incomeCategories;
            const select = document.getElementById('category');
            select.innerHTML = '<option value="">Select Category</option>';
            categories.forEach(cat => {
                const option = document.createElement('option');
                option.value = cat.name;
                option.textContent = cat.icon + ' ' + cat.name;
                select.appendChild(option);
            });
        }

        function getCategoryInfo(categoryName) {
            const categories = activeTab === 'expense' ? expenseCategories : incomeCategories;
            const allCategories = [...expenseCategories, ...incomeCategories];
            return allCategories.find(c => c.name === categoryName) || { icon: 'üì¶', color: '#6b7280' };
        }

        function addTransaction() {
            const amount = parseFloat(document.getElementById('amount').value);
            const category = document.getElementById('category').value;
            const description = document.getElementById('description').value;
            const date = document.getElementById('date').value;

            if (!amount || !category || !date) {
                alert('Please fill in all required fields');
                return;
            }

            const transaction = {
                id: Date.now(),
                amount: amount,
                category: category,
                description: description,
                date: date
            };

            if (activeTab === 'expense') {
                expenses.push(transaction);
            } else {
                income.push(transaction);
            }

            saveData();
            document.getElementById('amount').value = '';
            document.getElementById('category').value = '';
            document.getElementById('description').value = '';
            renderAll();
        }

        function deleteTransaction(id, type) {
            if (confirm('Are you sure you want to delete this transaction?')) {
                if (type === 'expense') {
                    expenses = expenses.filter(e => e.id !== id);
                } else {
                    income = income.filter(i => i.id !== id);
                }
                saveData();
                renderAll();
            }
        }

        function getCurrentMonthTotal(type) {
            const selectedMonth = document.getElementById('selectedMonth').value;
            const data = type === 'expense' ? expenses : income;
            return data
                .filter(t => t.date.startsWith(selectedMonth))
                .reduce((sum, t) => sum + t.amount, 0);
        }

        function renderSummary() {
            const totalExpense = getCurrentMonthTotal('expense');
            const totalIncome = getCurrentMonthTotal('income');
            const savings = totalIncome - totalExpense;

            document.getElementById('totalExpense').textContent = '‚Çπ' + totalExpense.toFixed(2);
            document.getElementById('totalIncome').textContent = '‚Çπ' + totalIncome.toFixed(2);
            document.getElementById('totalSavings').textContent = '‚Çπ' + savings.toFixed(2);
            document.getElementById('totalSavings').style.color = savings >= 0 ? '#10b981' : '#ef4444';
        }

        function renderTransactions() {
            const selectedMonth = document.getElementById('selectedMonth').value;
            const searchQuery = document.getElementById('searchQuery').value.toLowerCase();
            const data = activeTab === 'expense' ? expenses : income;
            
            const filtered = data
                .filter(t => t.date.startsWith(selectedMonth))
                .filter(t => {
                    if (!searchQuery) return true;
                    return t.category.toLowerCase().includes(searchQuery) ||
                           t.description.toLowerCase().includes(searchQuery) ||
                           t.amount.toString().includes(searchQuery) ||
                           t.date.includes(searchQuery);
                })
                .sort((a, b) => new Date(b.date) - new Date(a.date));

            const listEl = document.getElementById('transactionList');
            
            if (filtered.length === 0) {
                listEl.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üì¶</div>
                        <p>${searchQuery ? 'No transactions found' : 'No ' + activeTab + ' recorded for this month'}</p>
                    </div>
                `;
                return;
            }

            listEl.innerHTML = filtered.map(t => {
                const catInfo = getCategoryInfo(t.category);
                const formattedDate = new Date(t.date).toLocaleDateString('en-IN', { day: 'numeric', month: 'short', year: 'numeric' });
                const bgColor = activeTab === 'expense' ? '#fee2e2' : '#d1fae5';
                const textColor = activeTab === 'expense' ? '#ef4444' : '#10b981';
                const catBg = activeTab === 'expense' ? '#fecaca' : '#a7f3d0';
                
                return `
                    <div class="transaction-item">
                        <div class="transaction-icon" style="background-color: ${catInfo.color}">
                            ${catInfo.icon}
                        </div>
                        <div class="transaction-details">
                            <div>
                                <span class="transaction-amount" style="color: ${textColor}">‚Çπ${t.amount.toFixed(2)}</span>
                                <span class="transaction-category" style="background: ${catBg}; color: ${textColor}">
                                    ${t.category}
                                </span>
                            </div>
                            <div class="transaction-meta">
                                ${t.description ? t.description + ' ‚Ä¢ ' : ''}${formattedDate}
                            </div>
                        </div>
                        <button class="delete-btn" onclick="deleteTransaction(${t.id}, '${activeTab}')">üóëÔ∏è</button>
                    </div>
                `;
            }).join('');
        }

        function getMonthlyData() {
            const monthlyTotals = {};
            
            expenses.forEach(expense => {
                const month = expense.date.slice(0, 7);
                if (!monthlyTotals[month]) {
                    monthlyTotals[month] = { expense: 0, income: 0 };
                }
                monthlyTotals[month].expense += expense.amount;
            });

            income.forEach(inc => {
                const month = inc.date.slice(0, 7);
                if (!monthlyTotals[month]) {
                    monthlyTotals[month] = { expense: 0, income: 0 };
                }
                monthlyTotals[month].income += inc.amount;
            });

            return Object.keys(monthlyTotals)
                .sort()
                .slice(-6)
                .map(month => ({
                    month: month,
                    expense: monthlyTotals[month].expense,
                    income: monthlyTotals[month].income,
                    savings: monthlyTotals[month].income - monthlyTotals[month].expense
                }));
        }

        function getDailyData() {
            const selectedMonth = document.getElementById('selectedMonth').value;
            const monthExpenses = expenses.filter(e => e.date.startsWith(selectedMonth));
            const dailyTotals = {};

            monthExpenses.forEach(expense => {
                const day = parseInt(expense.date.split('-')[2]);
                if (!dailyTotals[day]) {
                    dailyTotals[day] = 0;
                }
                dailyTotals[day] += expense.amount;
            });

            return Object.keys(dailyTotals)
                .sort((a, b) => parseInt(a) - parseInt(b))
                .map(day => ({
                    day: 'Day ' + day,
                    amount: dailyTotals[day]
                }));
        }

        function renderCharts() {
            const monthlyData = getMonthlyData();
            const dailyData = getDailyData();

            if (monthlyChart) monthlyChart.destroy();
            if (dailyChart) dailyChart.destroy();

            const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
            monthlyChart = new Chart(monthlyCtx, {
                type: 'line',
                data: {
                    labels: monthlyData.map(d => d.month),
                    datasets: [
                        {
                            label: 'Income',
                            data: monthlyData.map(d => d.income),
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Expense',
                            data: monthlyData.map(d => d.expense),
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Savings',
                            data: monthlyData.map(d => d.savings),
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            const dailyCtx = document.getElementById('dailyChart').getContext('2d');
            dailyChart = new Chart(dailyCtx, {
                type: 'bar',
                data: {
                    labels: dailyData.map(d => d.day),
                    datasets: [{
                        label: 'Amount (‚Çπ)',
                        data: dailyData.map(d => d.amount),
                        backgroundColor: 'rgba(239, 68, 68, 0.8)',
                        borderColor: '#ef4444',
                        borderWidth: 2,
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function renderAll() {
            renderSummary();
            renderTransactions();
            renderCharts();
        }

        window.onload = init;
    </script>
</body>
</html>
